<!doctype html>
<html lang="fr">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Minuteur Minecraft - MMI DAY</title>
        <link
            href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap"
            rel="stylesheet"
        />
        <style>
            :root {
                --primary-purple: #7b2cbf;
                --primary-yellow: #ffea00;
                --primary-green: #2ecc71;
                --bg-color: #f4f1ea;
                --shadow-color: #000000;
            }

            body {
                margin: 0;
                padding: 0;
                background-color: var(--bg-color);
                background-image: repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 40px,
                    rgba(255, 255, 255, 0.4) 40px,
                    rgba(255, 255, 255, 0.4) 80px
                );
                font-family: "Fredoka", sans-serif;
                display: flex;
                flex-direction: column;
                align-items: center;
                min-height: 100vh;
                overflow: hidden; /* Empêche le scroll pendant l'animation */
            }

            /* Header & Barre de progression */
            .header-bar {
                width: 100%;
                height: 70px;
                background-color: var(--primary-purple);
                border-bottom: 3px solid black;
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0 30px;
                box-sizing: border-box;
                position: fixed;
                top: 0;
                z-index: 100;
            }

            #progress-bar {
                position: absolute;
                bottom: -3px;
                left: 0;
                height: 6px;
                background: var(--primary-yellow);
                width: 100%;
                transition: width 1s linear;
                border-bottom: 3px solid black;
            }

            .header-title {
                color: white;
                font-weight: 700;
                font-size: 1.5rem;
                text-transform: uppercase;
            }

            .main-container {
                margin-top: 120px;
                display: flex;
                flex-direction: column;
                align-items: center;
                width: 90%;
                max-width: 800px;
                position: relative;
            }

            .logo-img {
                max-width: 200px;
                margin-bottom: 20px;
                animation: float 3s ease-in-out infinite;
            }
            @keyframes float {
                0%,
                100% {
                    transform: translateY(0px);
                }
                50% {
                    transform: translateY(-8px);
                }
            }

            /* Panneau Explicatif */
            .info-card {
                background-color: white;
                border: 3px solid black;
                border-radius: 20px;
                padding: 25px;
                text-align: center;
                box-shadow: 6px 6px 0px var(--shadow-color);
                margin-bottom: 40px;
                position: relative;
                max-width: 650px;
            }

            .info-badge {
                position: absolute;
                top: -15px;
                left: 50%;
                transform: translateX(-50%);
                background-color: var(--primary-purple);
                color: white;
                padding: 5px 20px;
                border-radius: 20px;
                border: 2px solid black;
                font-weight: 700;
                font-size: 0.9rem;
                text-transform: uppercase;
            }

            .info-card h2 {
                margin: 10px 0;
                color: var(--primary-purple);
                font-size: 1.5rem;
            }
            .info-card p {
                font-size: 1.1rem;
                line-height: 1.5;
                color: #333;
                margin: 0;
            }
            .highlight {
                background-color: var(--primary-yellow);
                padding: 0 5px;
                border-radius: 5px;
                border: 1px solid black;
                font-weight: 700;
            }

            /* Minuteur */
            .timer-display {
                background-color: var(--primary-yellow);
                border: 4px solid black;
                border-radius: 40px;
                padding: 15px 50px;
                font-size: 5rem;
                font-weight: 700;
                color: black;
                box-shadow: 6px 6px 0px var(--shadow-color);
                margin-bottom: 30px;
                position: relative;
                min-width: 350px;
                text-align: center;
                transition: all 0.2s ease-in-out;
                z-index: 10;
            }

            .timer-display.urgent {
                background-color: var(--primary-green);
            }
            .timer-display.expanding {
                animation: pulse 0.5s infinite;
                border-color: #ff4757;
            }
            .timer-display.finished {
                background-color: black !important;
                color: var(--primary-yellow) !important;
                animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
            }

            @keyframes pulse {
                0%,
                100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.08);
                }
            }

            @keyframes shake {
                10%,
                90% {
                    transform: translate3d(-2px, 0, 0) scale(1.1);
                }
                20%,
                80% {
                    transform: translate3d(4px, 0, 0) scale(1.1);
                }
                30%,
                50%,
                70% {
                    transform: translate3d(-8px, 0, 0) scale(1.1);
                }
                40%,
                60% {
                    transform: translate3d(8px, 0, 0) scale(1.1);
                }
            }

            /* Particules d'explosion */
            .particle {
                position: absolute;
                width: 15px;
                height: 15px;
                background-color: #555;
                border: 2px solid black;
                pointer-events: none;
                opacity: 0;
                z-index: 5;
            }

            .timer-label {
                position: absolute;
                top: -18px;
                left: 50%;
                transform: translateX(-50%);
                background: black;
                color: var(--primary-yellow);
                padding: 4px 15px;
                border-radius: 15px;
                font-size: 0.9rem;
                font-weight: bold;
                white-space: nowrap;
                transition: all 0.3s;
            }

            /* Contrôles */
            .controls {
                display: flex;
                gap: 15px;
                justify-content: center;
                flex-wrap: wrap;
            }
            .btn {
                background-color: var(--primary-purple);
                color: white;
                border: 3px solid black;
                border-radius: 15px;
                padding: 12px 25px;
                font-size: 1.1rem;
                font-family: "Fredoka", sans-serif;
                font-weight: 600;
                cursor: pointer;
                box-shadow: 4px 4px 0px var(--shadow-color);
                transition: all 0.1s;
            }
            .btn:active {
                transform: translate(2px, 2px);
                box-shadow: 0px 0px 0px var(--shadow-color);
            }
            .btn-reset {
                background-color: #ff4757;
            }

            .settings {
                margin-top: 40px;
                font-size: 0.9rem;
                opacity: 0.6;
            }
            input[type="number"] {
                width: 50px;
                padding: 5px;
                border: 2px solid black;
                border-radius: 8px;
                text-align: center;
                font-weight: bold;
            }
        </style>
    </head>
    <body>
        <div class="header-bar">
            <div id="progress-bar"></div>
            <div
                style="
                    width: 40px;
                    height: 40px;
                    background: white;
                    border: 2px solid black;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    box-shadow: 2px 2px 0px black;
                "
            >
                <div style="font-size: 1.2rem">☰</div>
            </div>
            <div class="header-title">STAND MINECRAFT</div>
            <div
                style="
                    background: black;
                    color: white;
                    padding: 8px 20px;
                    border-radius: 30px;
                    font-weight: bold;
                    border: 2px solid white;
                "
            >
                MMI DAY
            </div>
        </div>

        <div class="main-container" id="particles-container">
            <img
                src="logo.png"
                alt="MMI Day Logo"
                class="logo-img"
                onerror="this.style.display = 'none'"
            />

            <div class="info-card">
                <div class="info-badge">dernier stand</div>
                <h2>Bienvenue sur le stand Minecraft</h2>
                <p>
                    Ce n'est pas qu'un jeu ! Ici, vous pourrez découvrir
                    <br /><span class="highlight"
                        >une reproduction fidèle de l'IUT</span
                    >
                    et testez nos mini-jeux d'initiation aux compétences MMI.
                </p>
                <p
                    style="
                        margin-top: 10px;
                        font-size: 0.95rem;
                        font-style: italic;
                        color: #555;
                    "
                >
                    Objectif : Illustrer nos compétences en développement,
                    création et hébergement.
                </p>
            </div>

            <div class="timer-display" id="display">
                <div class="timer-label" id="timer-label">
                    Prochaine session dans
                </div>
                <span id="minutes">10</span>:<span id="seconds">00</span>
            </div>

            <div class="controls">
                <button class="btn" onclick="startTimer()">▶ Démarrer</button>
                <button class="btn" onclick="pauseTimer()">⏸ Pause</button>
                <button class="btn btn-reset" onclick="resetTimer()">
                    ↻ Reset
                </button>
            </div>

            <div class="settings">
                <label>Durée session (min) : </label>
                <input
                    type="number"
                    id="inputMin"
                    value="10"
                    min="1"
                    max="60"
                />
                <button
                    class="btn"
                    style="
                        padding: 4px 10px;
                        font-size: 0.8rem;
                        margin-left: 5px;
                    "
                    onclick="setCustomTime()"
                >
                    OK
                </button>
            </div>
        </div>

        <audio
            id="creeperSound"
            src="https://www.myinstants.com/media/sounds/creeper-explosion.mp3"
            preload="auto"
        ></audio>

        <script>
            let timerInterval;
            let totalSeconds = 600;
            let initialSeconds = 600;
            let isRunning = false;

            const displayMin = document.getElementById("minutes");
            const displaySec = document.getElementById("seconds");
            const displayBox = document.getElementById("display");
            const timerLabel = document.getElementById("timer-label");
            const progressBar = document.getElementById("progress-bar");
            const creeperSound = document.getElementById("creeperSound");
            const container = document.getElementById("particles-container");

            function updateDisplay() {
                const m = Math.floor(totalSeconds / 60);
                const s = totalSeconds % 60;
                displayMin.textContent = m < 10 ? "0" + m : m;
                displaySec.textContent = s < 10 ? "0" + s : s;

                const percentage = (totalSeconds / initialSeconds) * 100;
                progressBar.style.width = percentage + "%";

                displayBox.classList.remove("urgent", "expanding", "finished");

                if (totalSeconds <= 0) {
                    displayBox.classList.add("finished");
                    timerLabel.textContent = "C'est terminé !";
                    timerLabel.style.backgroundColor = "#ff4757";
                } else if (totalSeconds < 10) {
                    displayBox.classList.add("urgent", "expanding");
                    timerLabel.textContent = "SESSION IMMINENTE !";
                    timerLabel.style.backgroundColor = "#ff4757";
                } else if (totalSeconds < 60) {
                    displayBox.classList.add("urgent");
                    timerLabel.textContent = "SESSION IMMINENTE !";
                    timerLabel.style.backgroundColor = "black";
                } else {
                    timerLabel.textContent = "Prochaine session dans";
                    timerLabel.style.backgroundColor = "black";
                }
            }

            function createExplosion() {
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement("div");
                    particle.classList.add("particle");

                    // Position de départ (centre du timer)
                    const rect = displayBox.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;

                    particle.style.left = centerX + "px";
                    particle.style.top = centerY + "px";
                    particle.style.backgroundColor = [
                        "#333",
                        "#555",
                        "#2ecc71",
                        "#000",
                    ][Math.floor(Math.random() * 4)];

                    document.body.appendChild(particle);

                    const destinationX = (Math.random() - 0.5) * 600;
                    const destinationY = (Math.random() - 0.5) * 600;

                    const animation = particle.animate(
                        [
                            {
                                transform: "translate(0, 0) scale(1)",
                                opacity: 1,
                            },
                            {
                                transform: `translate(${destinationX}px, ${destinationY}px) scale(0) rotate(360deg)`,
                                opacity: 0,
                            },
                        ],
                        {
                            duration: 800 + Math.random() * 400,
                            easing: "cubic-bezier(0, .9, .57, 1)",
                        },
                    );

                    animation.onfinish = () => particle.remove();
                }
            }

            function startTimer() {
                if (isRunning) return;
                creeperSound.load();
                if (totalSeconds <= 0) resetTimer();

                isRunning = true;
                timerInterval = setInterval(() => {
                    if (totalSeconds > 0) {
                        totalSeconds--;
                        updateDisplay();
                    } else {
                        clearInterval(timerInterval);
                        isRunning = false;
                        updateDisplay();
                        creeperSound.play();
                        createExplosion();
                    }
                }, 1000);
            }

            function pauseTimer() {
                clearInterval(timerInterval);
                isRunning = false;
            }
            function resetTimer() {
                pauseTimer();
                totalSeconds = initialSeconds;
                updateDisplay();
            }
            function setCustomTime() {
                const inputVal = document.getElementById("inputMin").value;
                if (inputVal > 0) {
                    initialSeconds = inputVal * 60;
                    resetTimer();
                }
            }

            updateDisplay();
        </script>
    </body>
</html>
